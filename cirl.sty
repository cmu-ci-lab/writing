\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{cirl}[2023/10/26 CIRL standard preamble]

\PassOptionsToPackage{shortlabels,inline}{enumitem}
\PassOptionsToPackage{noabbrev}{cleveref}

\DeclareOption{cvpr}{\newcommand{\venue}{cvpr}}
\DeclareOption{iccv}{\newcommand{\venue}{iccv}}
\DeclareOption*{\PackageWarning{cirl}{Unknown `\CurrentOption'}}
\ProcessOptions\relax

\ifx\venue\undefined
\else
	\RequirePackage{\venue}
\fi

% packages
% \RequirePackage{fullpage}
\@ifpackageloaded{graphicx}{}{\RequirePackage{graphicx}}	% control `includegraphics', already included in acmart, not in cvpr
\RequirePackage[export]{adjustbox}	% control `includegraphics' and other boxes
\@ifpackageloaded{xcolor}{}{\RequirePackage{xcolor}}	% provide color tools, supersedes `color', already included in acmart, not in cvpr
\RequirePackage[many]{tcolorbox}	% create colored boxes
\RequirePackage{colortbl}	% color table cells, rows, and columns
\@ifpackageloaded{microtype}{}{\RequirePackage{microtype}}	% improve kerning and spacing, already included in acmart, not in cvpr
\@ifpackageloaded{xspace}{}{\RequirePackage{xspace}}	% add eaten spaces when defining macros, already included in cvpr, not in acmart
\RequirePackage{pifont}	% use symbols such as checkmarks and xmarks
\RequirePackage[normalem]{ulem}	% provide underlinging, the `normalem' option is to disable overriding of `emph'
\@ifpackageloaded{caption}{\captionsetup[figure]{name={Figure}}}{\RequirePackage[format=plain,labelformat=simple,labelsep=period,font=small]{caption}}	% format captions, already included in both acmart and cvpr, in the former case override abbreviated labels for figures
\@ifpackageloaded{subcaption}{}{\RequirePackage{subcaption}}	% reference subfigures, supersedes `subfig' or `subfigure', already included in cvpr, not in acmart
\RequirePackage{ellipsis}	% fix ellipsis spacing
\RequirePackage{listings}	% list source code in latex document
\RequirePackage{wrapfig}	% provide wrapfigs
\@ifpackageloaded{enumitem}{}{\RequirePackage[shortlabels,inline]{enumitem}}	% control list environments, already included in cvpr with different options, not in acmart
\@ifpackageloaded{tabularx}{}{\RequirePackage{tabularx}}	% improve tables, already included in acmart, not in cvpr
\RequirePackage{url}	% insert hyperlinks
\RequirePackage{multirow}	% add multi rows and columns to tables
\@ifpackageloaded{booktabs}{}{\RequirePackage{booktabs}}	% improve tables, already included in acmart, not in cvpr
\@ifpackageloaded{natbib}{}{\RequirePackage[numbers,sort,compress]{natbib}}	% provide citet and citep, already included in acmart, not in cvpr

\AtEndPreamble{
	\@ifpackageloaded{cleveref}{}{\RequirePackage[capitalise,noabbrev]{cleveref}}	% provide clever references, already included in cvpr, not in acmart, configured at end of preamble as it needs to be loaded after hyperref, override CVPR options
	\crefname{section}{Section}{Sections}
	\Crefname{section}{Section}{Sections}
	\Crefname{table}{Table}{Tables}
	\crefname{table}{Table}{Tables}
	\newcommand{\crefrangeconjunction}{--}	% change crefrange conjunction style from "to" to en-dash
}

\RequirePackage{mathdefs}	% igkiou's custom math package
